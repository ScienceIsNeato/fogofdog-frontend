appId: com.fogofdog.app
---
- launchApp:
    appId: com.fogofdog.app
    clearState: true

# Verify we're on the login screen
- assertVisible: 
    text: "Sign In"
- assertVisible:
    id: "signInButton"

# Tap the Sign In button to authenticate
- tapOn:
    id: "signInButton"

# Handle potential location permission dialog
- runFlow:
    when:
      visible: "Allow"
    commands:
      - tapOn: "Allow While Using App"

# Wait for map to load and verify we're on the map screen
- waitForAnimationToEnd:
    timeout: 3000
# CRITICAL: Map screen MUST render within reasonable time
- assertVisible:
    id: "map-screen"