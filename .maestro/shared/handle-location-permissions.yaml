appId: com.fogofdog.app
---
# Handle Location Permissions - Cross-Platform
# This shared flow handles location permission dialogs on both iOS and Android

# iOS: "Allow While Using App" / "Allow Once" / "Don't Allow"
- runFlow:
    when:
      visible: 'Allow While Using App'
    commands:
      - tapOn: 'Allow While Using App'
      - waitForAnimationToEnd:
          timeout: 500

# iOS: Alternative text for permission dialog
- runFlow:
    when:
      visible: 'Allow'
    commands:
      - tapOn:
          text: 'Allow'
      - waitForAnimationToEnd:
          timeout: 500

# Android: "While using the app" / "Only this time" / "Don't allow"
# Note: Android permission dialogs may have different text
- runFlow:
    when:
      visible: 'While using the app'
    commands:
      - tapOn: 'While using the app'
      - waitForAnimationToEnd:
          timeout: 500

# Android: Alternative - precise/approximate location
- runFlow:
    when:
      visible: 'Precise'
    commands:
      - tapOn: 'Precise'
      - waitForAnimationToEnd:
          timeout: 300

# Android: "Only this time" fallback
- runFlow:
    when:
      visible: 'Only this time'
    commands:
      - tapOn: 'Only this time'
      - waitForAnimationToEnd:
          timeout: 500

# Android: Background location "Allow all the time"
- runFlow:
    when:
      visible: 'Allow all the time'
    commands:
      - tapOn: 'Allow all the time'
      - waitForAnimationToEnd:
          timeout: 500

# Wait for permission dialog to fully dismiss
- waitForAnimationToEnd:
    timeout: 1000
