appId: com.fogofdog.app
---
# Test: Dialog Cancel Functionality
# Purpose: Verify that the clear history dialog can be dismissed by clicking cancel

- launchApp

# Handle potential permission requests
- runFlow:
    when:
      visible: "Allow While Using App"
    commands:
      - tapOn: "Allow While Using App"
- runFlow:
    when:
      visible: "Allow"
    commands:
      - tapOn: "Allow"

# Wait for app to load - look for the trash can icon which indicates the map is ready
- extendedWaitUntil:
    visible:
      text: "üóëÔ∏è"
    timeout: 15000

# Wait for app to fully load
- waitForAnimationToEnd

# Take initial screenshot
- takeScreenshot: "01-initial-map-screen"

# Look for and tap the trash can button to open dialog
- tapOn: 
    text: "üóëÔ∏è"
- waitForAnimationToEnd

# Verify dialog is visible
- assertVisible: "Clear Exploration Data"
- takeScreenshot: "02-dialog-opened"

# Tap the Cancel button
- tapOn: "Cancel"
- waitForAnimationToEnd

# Verify dialog is dismissed - should see map screen again
- assertVisible:
    id: map-screen
- assertVisible:
    text: "You are here"
- assertNotVisible: "Clear Exploration Data"
- takeScreenshot: "03-dialog-dismissed"

# Test completed successfully if we reach here
# Final verification that we're back on the map screen
- assertVisible:
    id: map-screen