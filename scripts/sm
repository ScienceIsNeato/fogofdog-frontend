#!/bin/bash
# Auto-generated by slop-mop setup — runs sm from the local submodule.
# Do NOT install slop-mop via pip. Each project gets its own copy.

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"
SLOP_MOP_DIR="$PROJECT_ROOT/slop-mop"

if [ ! -d "$SLOP_MOP_DIR/slopmop" ]; then
    echo "❌ Error: slop-mop submodule not found at $SLOP_MOP_DIR"
    echo "   Run: git submodule update --init"
    exit 1
fi

# Run the module directly from the submodule.
# cd to project root first so --project-root defaults to "." work correctly
# regardless of where the caller's working directory is (e.g. git hooks,
# CI steps, or running the wrapper via an absolute path from a subdir).
export PYTHONPATH="$SLOP_MOP_DIR:${PYTHONPATH:-}"
cd "$PROJECT_ROOT"
exec "$PROJECT_ROOT/venv/bin/python" -m slopmop.sm "$@"
